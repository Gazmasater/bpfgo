1. Создание нового сетевого пространства имен
Для начала создаём новое пространство имен с помощью команды ip netns add.


sudo ip netns add testns
Теперь у нас есть пространство имен с именем testns.

2. Создание пары виртуальных интерфейсов (veth)
Создаём пару виртуальных Ethernet интерфейсов. Эти интерфейсы будут подключены друг к другу,
 и один из них будет назначен в новое пространство имен, а второй останется в текущем.


sudo ip link add veth0 type veth peer name veth1
Это создаст два интерфейса:

veth0 — интерфейс в текущем пространстве имен.
veth1 — интерфейс, который мы позже перенесем в пространство имен testns.
3. Перемещение интерфейса в новое пространство имен
Теперь перемещаем интерфейс veth1 в пространство имен testns.


sudo ip link set veth1 netns testns
Это действие перемещает интерфейс veth1 в пространство имен testns, 
и он больше не будет виден в текущем пространстве имен.

4. Проверка интерфейсов в новом пространстве имен
Теперь можно проверить, что интерфейс veth1 действительно оказался 
в новом пространстве имен. Используем команду ip netns exec для работы с интерфейсами 
в пространстве имен.


sudo ip netns exec testns ip link show
В результате этой команды ты должен увидеть интерфейс veth1 в пространстве имен testns. 
Также будет отображён интерфейс lo (loopback), поскольку он создаётся автоматически
 при создании пространства имен.

5. Настройка интерфейсов (опционально)
Теперь, когда интерфейс veth1 находится в новом пространстве имен, можно настроить
 его так же, как любой другой интерфейс.

Для примера:

Включаем интерфейс veth0 в текущем пространстве имен:

sudo ip link set veth0 up
Включаем интерфейс veth1 в новом пространстве имен testns:

sudo ip netns exec testns ip link set veth1 up
6. Проверка соединения между интерфейсами
Теперь можно проверить, что интерфейсы могут общаться друг с другом.
 Для этого настроим IP-адреса на интерфейсах и проверим их соединение.

Назначаем IP-адреса интерфейсам:

sudo ip addr add 192.168.1.1/24 dev veth0
sudo ip netns exec testns ip addr add 192.168.1.2/24 dev veth1
Включаем интерфейсы:

sudo ip link set veth0 up
sudo ip netns exec testns ip link set veth1 up
Теперь проверим связь между интерфейсами с помощью ping:

sudo ip netns exec testns ping -c 3 192.168.1.1
Если всё настроено правильно, ты увидишь ответы от интерфейса veth0, 
что означает успешное соединение между интерфейсами.

7. Удаление пространства имен (если нужно)
Если больше не нужно пространство имен, его можно удалить:


sudo ip netns del testns


Итоговый процесс:
Создаём пространство имен testns.
Создаём пару виртуальных интерфейсов veth0 и veth1.
Перемещаем интерфейс veth1 в новое пространство имен testns.
Проверяем, что интерфейс veth1 находится в testns.
Настроим интерфейсы и проверим соединение между ними.
Этот процесс позволяет создать изолированную сеть в Linux, которая полезна 
для тестирования, контейнеризации и других сетевых задач.